<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Simple template</title>
  </head>
  <body>
    <script>
      const importObj = {
          imports: { imported_func: (arg)=>console.log(arg) }
      }
      WebAssembly.instantiateStreaming(
          fetch("simple.wasm"), importObj
      ).then(obj=>console.log(obj.instance.exports))  //.exported_func())
      /*
      //
      // do this when server (i.g.Ruby's thin) does not support MIME:application/wasm yet
      //
      fetch("simple.wasm")
        .then((response) => response.arrayBuffer())
        .then((bytes) => WebAssembly.instantiate(bytes, importObj))
        .then((results) => {
            console.log(result)
            results.instance.exports.exported_func()
        })
      */
    </script>
  </body>
</html>
