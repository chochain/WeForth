<html><head><title>weForth v1.2</title><style>h2{color:#c44;margin:0}h3{color:#fc4;margin:0}.tic{width:100%;text-align:center;background-color:#eee;margin:2px;padding:5px 0 5px 0}.tac{width:90%;text-align:right;color:#484;margin:4px}.txt{width:50%;height:100%;margin:4px;display:flex;flex-direction:column;overflow-x:scroll;display:block}.sep{width:4px;height:100%;border:1px solid gray;cursor:col-resize}.cmd{color:#48f;margin:2px}.CodeMirror{width:100%;border:1px solid #444;height:auto}</style><link href=https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/codemirror.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/codemirror.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.52.2/mode/forth/forth.min.js></script></head><body><div style=display:flex;font-size:18px;font-family:monospace;width:100%;height:100%><div style=display:flex;flex-direction:column;width:15%;height:100%><pre class=tic>ss</pre><pre class=tac id=ss></pre><pre class=tic>dict</pre><pre class=tac id=dc></pre></div><div style=display:flex;flex-direction:row;width:85%;height:100%><pre class=txt id=txt></pre><div class=sep id=sep></div><div class=txt id=edt><div style=display:flex><button onclick=clear_txt() style=width:10%>clear</button><input id=tib onkeydown="13===event.keyCode&&forth_eval()"style=width:90% value=""></div><textarea id=cm>copy and paste lesson402.txt here...</textarea></div></div></div><script>let tib=document.getElementById("tib"),txt=document.getElementById("txt"),edt=document.getElementById("edt"),cm=CodeMirror.fromTextArea(document.getElementById("cm"),{lineNumbers:!0,styleActiveLine:!0,mode:"forth"});function drag(t,e,n){e.onmousedown=o=>{let r={mx:o.clientX,my:o.clientY,x:o.offsetLeft,y:o.offsetTop,w0:t.offsetWidth,w1:n.offsetWidth};document.onmousemove=o=>{let l={x:o.clientX-r.mx,y:o.clientY-r.my};l.x=Math.min(Math.max(l.x,-r.w0),r.w1),e.style.left=r.offsetLeft+l.x+"px",t.style.width=r.w0+l.x+"px",n.style.width=r.w1-l.x+"px"},document.onmouseup=()=>{document.onmousemove=document.onmouseup=null}}}function show_ss(){let t=wasmExports,e=t.vm_ss_idx(),n=new Int32Array(t.memory.buffer,t.vm_ss(),e),o=new Int32Array(t.memory.buffer,t.top,1),r=document.getElementById("ss");r.innerHTML=o+"<br/>";for(let t=e-1;t>=0;--t)r.innerHTML+=n[t]+"<br/>"}function show_dict(){let t=wasmExports.vm_dict_idx(),e=Module.cwrap("vm_dict","string",["number"]),n=document.getElementById("dc");n.innerHTML="";for(let o=t-1;o>=0;--o)n.innerHTML+=e(o)+"<br/>"}function to_txt(t,e=!0){txt.innerHTML+=e?t+"<br/>":t,txt.scrollTop=txt.scrollHeight}function clear_txt(){txt.innerHTML=""}cm.setSize("100%","100%"),cm.on("copy",(t=>{let e=t.getSelection();tib.value=e.replace(/[\t|\n]/g," "),tib.style.backgroundColor="#fe0",document.activeElement.blur(),tib.focus()})),drag(txt,document.getElementById("sep"),edt);var Module={print:to_txt};function forth_eval(){let t=tib.value.replace(/:/g,"<br/>:");0==t.indexOf("<br/>")&&t.replace("<br/>",""),to_txt('<pre class="cmd"><em>'+t+"</em></pre>",!1);try{Module.cwrap("forth",null,["number","string"])(0,tib.value),show_ss(),show_dict()}catch(t){console.log(t.toString()+"\n")}finally{tib.value="",tib.style.backgroundColor="white"}}</script><script src=ceforth.js async></script></body></html>