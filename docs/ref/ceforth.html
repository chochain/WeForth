<html><head><title>weForth v4.1</title><style>h2{color:#c44;margin:0}h3{color:#fc4;margin:0}.tic{width:100%;text-align:center;background-color:#eee;margin:2px;padding:5px 0 5px 0}.tac{width:90%;text-align:right;color:#484;margin:4px}.toe{width:90%;text-align:left;text-wrap:auto;color:#484;margin:4px}.txt{width:50%;height:100%;margin:4px;display:flex;flex-direction:column;overflow-x:scroll;display:block}.sep{width:4px;height:100%;border:0;cursor:col-resize}.cmd{color:#48f;margin:2px}.CodeMirror{width:100%;border:1px solid #444;height:auto}</style><link href=https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/codemirror.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.16/mode/forth/forth.min.js></script></head><body><div style=display:flex;font-size:18px;font-family:monospace;width:100%;height:100%><div style=display:flex;flex-direction:column;width:15%;height:100%><pre class=tic>Data Stack</pre><pre class=tac id=ss></pre><pre class=tic>User Dict</pre><pre class=tac id=dc></pre></div><div style=display:flex;flex-direction:row;width:85%;height:100%><pre class=txt id=txt></pre><div class=sep id=sep></div><div class=txt id=edt><div style=display:flex><input id=tib onkeydown="13===event.keyCode&&forth_eval()"style=width:100% value=""></div><textarea id=cm>
\ 1. find tests/lesson410.txt, drag & drop it into this area
\ 2. high-light each example using arrow-keys with SHIFT-key down
\ 3. hit Ctrl-C to cut & paste into input line above
\ 4. hit RETURN to execute</textarea></div></div></div><script>let tib=document.getElementById("tib"),txt=document.getElementById("txt"),edt=document.getElementById("edt"),cm=CodeMirror.fromTextArea(document.getElementById("cm"),{lineNumbers:!0,styleActiveLine:!0,mode:"forth"});function drag(t,e,o){e.onmousedown=n=>{let l={mx:n.clientX,my:n.clientY,x:n.offsetLeft,y:n.offsetTop,w0:t.offsetWidth,w1:o.offsetWidth};document.onmousemove=n=>{let r={x:n.clientX-l.mx,y:n.clientY-l.my};r.x=Math.min(Math.max(r.x,-l.w0),l.w1),e.style.left=l.offsetLeft+r.x+"px",t.style.width=l.w0+r.x+"px",o.style.width=l.w1-r.x+"px"},document.onmouseup=()=>{document.onmousemove=document.onmouseup=null}}}function show_ss(){let t=wasmExports,e=t.vm_ss_idx(),o=new Int32Array(t.memory.buffer,t.vm_ss(),e),n=new Int32Array(t.memory.buffer,t.top,1),l=document.getElementById("ss");l.innerHTML=n+"<br/>";for(let t=e-1;t>=0;--t)l.innerHTML+=o[t]+"<br/>"}function show_dict(){let t=wasmExports.vm_dict_idx(),e=Module.cwrap("vm_dict","string",["number"]),o=document.getElementById("dc");o.innerHTML="";for(let n=t-1;n>=0&&"boot"!=e(n);--n)o.innerHTML+=e(n)+"<br/>"}function to_txt(t,e=!0){txt.innerHTML+=e?t+"<br/>":t,txt.scrollTop=txt.scrollHeight}cm.setSize("100%","100%"),cm.on("copy",(t=>{let e=t.getSelection();tib.value=e.replace(/[\t|\n]/g," "),tib.style.backgroundColor="#fe0",document.activeElement.blur(),tib.focus()})),drag(txt,document.getElementById("sep"),edt);var Module={print:to_txt};function forth_eval(){let t=tib.value.replace(/:/g,"<br/>:");if("clear"!=t){0==t.indexOf("<br/>")&&t.replace("<br/>",""),to_txt('<pre class="cmd"><em>'+t+"</em></pre>",!1);try{Module.cwrap("forth",null,["number","string"])(0,tib.value),show_ss(),show_dict()}catch(t){console.log(t.toString()+"\n")}finally{tib.value="",tib.style.backgroundColor="white"}}else txt.innerHTML=""}</script><script src=ceforth.js async></script></body></html>